metadata:
  name: example-curl-external
  namespace: argo-workflows
spec:
  serviceAccountName: argo-workflow
  entrypoint: curl
  arguments:
    parameters:
      - name: url
        value: https://ipinfo.io
  templates:
    - name: curl
      inputs:
        parameters:
          - name: url
            value: "{{workflow.parameters.url}}"
      script:
        name: main
        image: alpine/curl
        command:
          - sh
        source: |
          curl {{inputs.parameters.url}}
          test $? -eq 6
  ttlStrategy:
    secondsAfterCompletion: 300
  podGC:
    strategy: OnPodCompletion
    deleteDelayDuration: 300
